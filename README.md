			# Project "Bonus program of the bank" #

*Запуск программы после сборки:
Находясь в папке проекта, выполнить команду:
	1) ./main_admin - для запуска интерфейса администратора;
	2) ./main_client - для запуска интерфейса клиента;

*Описание системы:
Администратор может:
	Просматривать, какие клиенты имеются в банке на данный момент, а также информацию о каждом из них;
	Добавлять новых клиентов;
	Управлять балансом для покупок всех клиентов;
	Добавлять новые правила для начисления бонусов клиентам банка за совершение покупок;
	Удалять все добавленные ранее правила;
Клиент может:
	Просматривать информацию о состоянии своего банковского счета;
	Совершать покупки в магазинах (платежи), указывая информацию о покупке(дату, магазин, сумму и т.д.);

*Интерфейс администратора:
*запущена программа для администратора*
Для выпонения действий как администратор необходимо войти в систему, используя команду 'login'.
Возможные команды:
1) menu 
	Вывести на экран список возможных команд и краткое описание их действий;
2) login
	Вызов этой команды приводит к запросу у пользователя данных о администраторе (вход в систему как админ);
	Сначала система требует ввод логина администратора;
		Enter login:
		и далее необходимо ввести логин и нажать Enter.
	Затем требует ввод пароля
		Enter password: 
		и далее необходимо ввести пароль и нажать Enter.
	Если логин и пароль верны, то выполнен вход в система и действие команды завершается.
	Если же нет, то пользователю сообщается об этом, вход в систему не выполнен.
	Логин и пароль по умолчанию -  admin admin
3) logout
	Вызов этой команды приводит к выходу из систему как администратора.
4) change pw
	Команда для изменения пароля администратора.
	Если пользователь не выполнил вход в систему с помощью команды login, то выпонение команды сразу же завершается
	Пользователю сообщается, что он не зашел в систему.
	Иначе:
	Система запрашивает новый пароль
		Enter new password:
		и далее необходимо ввести новый пароль и нажать Enter.
	Пароль изменен.
	Действие команды завершается.
5) client
	Команда для добавления нового клиента банка.
	Если пользователь не выполнил вход в систему с помощью команды login, то выпонение команды сразу же завершается
	Пользователю сообщается, что он не зашел в систему.
	Иначе:
	Система заправшивает данные о новом клиенте:
		Enter login of new client:
		-необходимо ввести логин клиента и нажать Enter.
	Если логин уже занят, то об этом сообщается пользователю и предлагает ввести другой.
	Если свободен, то запрашивается имя клиента. Нужно его ввести и нажать Enter.
	Система случайным образом формирует номер счета для клиента и выводит его на экран (Number account).
	Далее запрашивается стартовый баланс нового клиента.
		Enter balance of new client:
		-нужно ввести вещественное число через . и нажать Enter.
	Если введенные данные не являются таковым числом, то об этом сообщается пользователю и предлагается ввести заново.
	Бонусный баланс клиент устаналивается равным 0.
	Действие команды завершается.
6) show clients
	При вводе этой команды на экран выводится список логинов всех клиентов, имеющихся в банке на данный момент.
	Если пользователь не выполнил вход в систему с помощью команды login, то выпонение команды сразу же завершается
	Пользователю сообщается, что он не зашел в систему.
	Иначе выводится список клиентов.
7) show info
	Команда для просмотра информации о любом клиенте банка.
	Если пользователь не выполнил вход в систему с помощью команды login, то выпонение команды сразу же завершается
	Пользователю сообщается, что он не зашел в систему.
	Иначе:
		Система запрашивает у администратора логин клиента, информацию о котором он хочет увидеть.
			Enter client's login: 
		Необходимо ввести логин и нажать Enter.
		Если клиента с таким логином не существует, то действие команды завершается и об этом сообщается пользователю.
		Если такой клиент есть, то на экран выводит информация о нем (Имя, Номер счета, Бонусный баланс и Баланс счета для покупок)
8) balance
	Команда для изменения баланса любого клиента банка
	Если пользователь не выполнил вход в систему с помощью команды login, то выпонение команды сразу же завершается
	Пользователю сообщается, что он не зашел в систему.
	Иначе:
		Система запрашивает логин клиента, баланс которого он хочет изменить.
		Необходимо ввести логин и нажать Enter. Если клиента с таким логином нет в системе, то предлагается ввести заново.
		Далее запрашивается баланс, который хочет установить администратор.
		Нужно ввести вещетсвенное числа через . и нажать Enter.
		Если введенные данные не явлются таким числом, то необоходимо повторить ввод числа.
	Баланс изменен.
9) rule
	Команда для добавления новых правил начисления бонусов за совершение покупки.
	Если пользователь не выполнил вход в систему с помощью команды login, то выпонение команды сразу же завершается
	Пользователю сообщается, что он не зашел в систему.
	Иначе:
		Есть две возможности задать правило:
		a) Ввести команду 'commands'.
			С ее помощью можно задавать правило в диалоговом режиме.
			Сначала необходимо ввести условие, при выполнении которого будет начислен процент от суммы покупки (будет введен позже)
			Система выводит список возможных команд:
				1. And             &
				2. Or              |
				3. Negation        !
				4. Follow          ->
					5. Equal           =
					6. NotEqual        !=
					7. Greater         >
					8. GreaterEqual    >=
					9. Less            <
					10. LessEqual      <=
				Если в дальнейшем пользователь захочет увидеть снова данный список, он может в любой момент создания правила ввести команду 'help' и продолжать дальнейший ввод.
					Ввод правила происходит рекурсивно.
				Рассмотрим создание правила на примере:
					Если пользователь хочет задать правило 'Если дата покупки больше 12.01.2017 и баланс пользователя меньше 200, то начислить 10.5% от суммы покупки' :
				Сначала задается вид всего условия.
					В данном примере: & (логическое И)
				Далее, если это:
					--- &(логическое И), |(логическое ИЛИ), ->(СЛЕДУЕТ), то запрашивается вид левого условия.
						Для него выполняются все те же самые действия, что и для общего.
						После окончания ввода левого условия, запрашивается вид правого условия и опять же выполняется всё то же самое.
						В данном примере: левое - >, правое - <
							--- !(логическое НЕ), то запрашивается вид условия, к которому будет применяться отрицание.
							--- =(равно), !=(не равно), >(больше), >=(больше или равно), <(меньше), <=(меньше или равно)
							Запрашивается атрибут, который пользователь хочет проверить.
							Возможные варианты:
								date  -  Дата совершения покупки
								time  -  Время совершения покупки
								shop  -  Магазин, в котором была сделана покупка (получатель платежа)
								amount  -  Сумма покупки
								balance  -  Баланс клиента на момент совершения платежа.
							Сравнения =, != могут применяться ко всем атрибутам
									  >, >=, <, <= могут применяться ко всем, кроме shop
							Если введена какая-то другая команда, то необходимо повторить ввод и ввести один из указанных выше атрибутов.
							Далее необходимо ввести константу, с которой производится сравнение
							Формат констант:
								date  -  dd.mm.yyyy, где dd -  число, mm - месяц, yyyy - год; 01 <= dd <= 31, 01 <= mm <= 12
								time  -  hh:mm, где hh - часы, mm - минуты; 00 <= hh <= 23, 00 <= mm <= 59
								shop  -  название магазина без пробелов из латинских буквы любого регистра, цифр и _.
								amount и balance - вещественное число через .
							Если введенные данные не соответствуют формату, необходимо повторить ввод.
								В данным примере необходимая последовательность команд:
								>
								date
								12.01.2017
								<
								balance
								200
					Когда рекурсивное создание условия завершено, запрашивается размер процента от суммы покупки, который будет начисляться клиенту.
					Нужно ввести вещественное числа через .
					Если оно таковым не является, то необходимо повторить ввод.
					В данным примере: 10.5
					Создание правила завершено.
					Правило добавляется в систему.
				б) Ввести строку, удовлетворяющую языку.
				Строка должна иметь следующий вид:
				add rule: if [условие], bonus [число]
				Грамматика языка следующая:
					S->'add ' 'rule: ' 'if ' FOLLOW ',' 'bonus ' NUM 
					FOLLOW -> DIS{'-' DIS}
					DIS -> CON{'|'CON}
					CON -> NEG{'&'NEG}
					NEG -> A | '!'{'!'} NEG
					A -> '(' FOLLOW ')' | CMP
					CMP -> 'date' SGN DATE | 'time' SGN TIME | 'shop' SGN2 SHOP | 'amount' SGN NUM | 'balance' SGN NUM
					DATE -> DAY '.' MONTH '.' YEAR
					TIME -> HOUR ':' MINUTE
					SHOP -> SMB {SMB}
					NUM -> DG {DG} {.} {DG}
					SGN -> '=' | '<>' | '<' | '<=' | '>' | '>='
					SGN2 -> '=' | '<>'
					SMB -> 'a'|'b'|...|'z'|'A'|'B'|...|'Z'|'_'| DG
					DG -> '0'|...|'9'
					DAY -> '01'|'02'|...|'31'
					MONTH -> '01'|'02'|...|'12'
					YEAR -> DG {DG}
					HOUR -> '00'|'01'|...|'23'
					MINUTE -> '00'|'01'|...|'59'
				Все пробельные символы игнорируются, за исключение тех, что обозначены в грамматике (после add, rule:, if и bonus необходим хотя бы один пробельный символ)
				Если введенная строка удовлетворяет языку, то правило создается и добавляется в систему
				Если нет, то об этом сообщается пользователю и предлагается повторить попытку ввода.
				Пример строки, удовлетворяющей языку:
					add rule: if date>=12.01.2017 &time<12:00 | balance<200, bonus 10.56
				Смысл строки:
					'&'   - логическое И
					'|'   - логическое ИЛИ
					'-'   - логическое СЛЕДУЕТ
					'!'   - логическое НЕ (отрицание)
					'>'   - сравнение на больше
					'>='  - сравнение на больше либо равно
					'<'   - сравнение на меньше
					'<='  - сравнение на меньше либо равно
					'='   - сравнение на равенство
					'<>'  - сравнение на неравенство
					date - дата покупки
					time - время покупки
					shop - магазин, в котором была совершена покупка (получатель платежа)
					amount -  сумма покупки
					balance -  баланс клиента на момент совершения покупки
				Если строка удовлетворяет языку, то правило добавляется в систему, действие команды завершается.
	10) delete
		При вводе данной команды происходит удаление (очистка) всех правил, введенных ранее.
		Если пользователь не выполнил вход в систему с помощью команды login, то выпонение команды сразу же завершается
		Пользователю сообщается, что он не зашел в систему.
		Иначе правила очищаются.
	11) exit
		При вводе данной команды программа завершается.
Если введена команда, отсутствующая в списке выше, то об этом сообщается пользователю и предлагается ввести команду заново.

*Интерфейс клиента:
*запущена программа для клиента*
Для выпонения действий необходимо войти в систему, используя команду 'login'.
Возможные команды:
	1) login
		Команда для входа в систему как конкретный клиент банка
		Выдается приглашение ко вводу логина
		Необходимо ввести один из логинов, имеющихся в системе, и нажать  ENTER
		Если данный логин отсутствует, то нужно дейтвие команды завершается и об этом сообщается пользователю
		Если такой клиент имеется, то осуществляется вход в система под данным логином
		Далее все команды будут выполняться для этого конкретного клиента (пока не будет вызван logout)
	2) logout
		Команда для выхода из системы
	3) info
		Команда для вывода на экран всей имеющейся информации о пользователе
		Если пользователь не выполнил вход в систему с помощью команды login, то выпонение команды сразу же завершается
		Пользователю сообщается, что он не зашел в систему.
		Иначе выводитcя login, name, account number, bonus balance и balance
	4) payment
		Команда для совершения покупок(платежей).
		Если пользователь не выполнил вход в систему с помощью команды login, то выпонение команды сразу же завершается
		Пользователю сообщается, что он не зашел в систему.
		Иначе:
			-выдается приглашение для ввода ДАТЫ совершения покупки
				Необходимо ввести дату и формате dd.mm.yyyy (01 <= dd <= 31, 01 <= mm <= 12) и нажать ENTER.
				Если дата не удовлетворяет данному формату, то выводится сообщение и прелагается повторить ввод.
			-выдается приглашение для ввода ВРЕМЕНИ совершения покупки
				Необходимо ввести время и формате hh:mm (00 <= hh <= 23, 00 <= mm <= 59) и нажать ENTER.
				Если время не удовлетворяет данному формату, то выводится сообщение и прелагается повторить ввод.
			-выдается приглашения для ввода магазина
				Необходимо ввести название магазина и нажать ENTER
			-выдается пришлашение для ввода сумма покупи
				Необходимо ввести вещественное число через '.' и нажать ENTER
				Если введенные данные не являются таковым, то выводится сообщение и предлагается повторить ввод.
				Когда все данные о покупке успешно введены, со счета клиента для покупок списывается сумма покупки (уменьшается баланс),
			затем в соответствии с правилами, заданным администратором системы, определяется процент для начисления бонуса
			Нужное число бонусов начисляется на бонусный счет клиента (процент * сумма покупки / 100)
			На экран выводится число бонусом, начисленное клиенту.
			Действие команды завершается

	5) exit
		При вводе данной команды работа программы завершается.
	Все данные о системе сохраняются до следующего сеанса работы с системой.









